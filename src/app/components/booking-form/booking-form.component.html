<section id="citas" class="py-5 bg-light">
    <div class="container">
        <div class="row align-items-center g-5">

            <!-- Columna de Información (Rellena tus placeholders) -->
            <div class="col-lg-5">
                <h2 class="fw-bold">¡Reserva tu Cita Hoy Mismo!</h2>
                <p class="lead">No esperes más. Dale a tu auto el trato profesional que merece y recupera esa sensación
                    de conducir un vehículo impecable.</p>
                <p>Rellena el formulario o contáctanos directamente. Revisaremos tu solicitud y te contactaremos por
                    WhatsApp o teléfono para confirmar tu cita a la brevedad.</p>

                <div class="mt-4">

                    <!-- ¡CAMBIA [TuNumero] por tu número real! Ej: 5520022666 -->
                    <a href="https://wa.me/5520022666" target="_blank" class="btn btn-success btn-lg mb-3 w-100">
                        <i class="fab fa-whatsapp me-2"></i> Enviar WhatsApp Directo
                    </a>
                    <h4 class="h5 mt-4">Contacto Directo:</h4>
                    <p class="fs-5 mb-2">
                        <i class="fas fa-phone me-2 text-primary"></i> <strong>Teléfono:</strong>
                        <!-- ¡CAMBIA [+52-55-1234-5678] por tu teléfono real! -->
                        <a class=" text-decoration-none" href="tel:5520022666" style="color:#f77a1d">55 2002 2666</a>
                    </p>
                    <p class="fs-5">
                        <i class="fas fa-map-marker-alt me-2 text-primary"></i> <strong>Dirección:</strong>
                        <a href="https://www.google.com/maps/place/Auto+Servicio+Keyko/@19.4135329,-99.010771,12z/data=!4m7!3m6!1s0x85d1e33500ee2353:0x6edf3a13f21bbb4f!8m2!3d19.4134493!4d-99.0108184!15sChJhdXRvc2VydmljaW8ga2V5a29aFCISYXV0b3NlcnZpY2lvIGtleWtvkgEYcHJlc3N1cmVfd2FzaGluZ19zZXJ2aWNlmgEjQ2haRFNVaE5NRzluUzBWSlEwRm5TVU10T0dKaVRXTm5FQUXgAQD6AQQIABA-!16s%2Fg%2F12hyydl9y?entry=tts&g_ep=EgoyMDI1MTAyMC4wIPu8ASoASAFQAw%3D%3D&skid=a09f81cf-3c27-4f84-84be-eb16947ed246"
                            target="_blank" class=" text-decoration-none" style="color:#f77a1d">Av.
                            Dr. Gustavo Baz 83, Benito Juárez, 57000 Cdad. Nezahualcóyotl, Méx.</a>
                    </p>
                </div>
            </div>

            <!-- Columna del Formulario -->
            <div class="col-lg-7">
                <div class="card shadow border-0">
                    <div class="card-body p-4 p-md-5">
                        <h3 class="text-center mb-4">Completa tus datos</h3>

                        <!-- 
              ¡CAMBIOS PRINCIPALES AQUÍ!
              1. [formGroup]="citaForm"  <-- Conecta el formulario
              2. (ngSubmit)="onSubmit()" <-- Llama a tu función al enviar
              3. novalidate             <-- Deja que Angular maneje la validación
            -->
                        <form [formGroup]="citaForm" (ngSubmit)="onSubmit()" novalidate>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="nombre" class="form-label">Nombre Completo*</label>
                                    <input type="text" class="form-control form-control-lg" id="nombre"
                                        formControlName="nombre" required
                                        [ngClass]="{ 'is-invalid': f['nombre'].invalid && f['nombre'].touched }">
                                    <!-- Mensaje de error -->
                                    <div *ngIf="f['nombre'].invalid && f['nombre'].touched" class="invalid-feedback">
                                        El nombre es requerido.
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="telefono" class="form-label">Teléfono (WhatsApp)*</label>
                                    <input type="tel" class="form-control form-control-lg" id="telefono"
                                        formControlName="telefono" required
                                        [ngClass]="{ 'is-invalid': f['telefono'].invalid && f['telefono'].touched }">
                                    <!-- Mensaje de error -->
                                    <div *ngIf="f['telefono'].invalid && f['telefono'].touched"
                                        class="invalid-feedback">

                                    </div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="servicio" class="form-label">Servicio Deseado*</label>
                                <select class="form-select form-select-lg" id="servicio" formControlName="servicio"
                                    required
                                    [ngClass]="{ 'is-invalid': f['servicio'].invalid && f['servicio'].touched }">
                                    <option value="" disabled>Selecciona un servicio...</option>
                                    <option value="Servicio completo">Servicio completo</option>
                                    <option value="Lavado de carrocería">Lavado de carrocería</option>
                                    <option value="Otro">Otro</option>
                                </select>
                                <!-- Mensaje de error -->
                                <div *ngIf="f['servicio'].invalid && f['servicio'].touched" class="invalid-feedback">
                                    Debes seleccionar un servicio.
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="fecha" class="form-label">Fecha Deseada*</label>
                                    <input type="date" class="form-control form-control-lg" id="fecha"
                                        formControlName="fecha" required
                                        [ngClass]="{ 'is-invalid': f['fecha'].invalid && f['fecha'].touched }">
                                    <!-- Mensaje de error -->
                                    <div *ngIf="f['fecha'].invalid && f['fecha'].touched" class="invalid-feedback">
                                        La fecha es requerida.
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="hora" class="form-label">Hora de Preferencia*</label>
                                    <select class="form-select form-select-lg" id="hora" formControlName="hora"
                                        required>
                                        <option value="Mañana">Por la mañana (9 AM - 1 PM)</option>
                                        <option value="Tarde">Por la tarde (1 PM - 6 PM)</option>
                                    </select>
                                </div>
                            </div>

                            <!-- 
                ¡CAMBIOS EN EL BOTÓN!
                1. [disabled] <-- Se deshabilita si el form es inválido o se está enviando
                2. *ngIf       <-- Muestra un spinner/texto de "Enviando..."
              -->
                            <button type="submit" class="btn btn-primary w-100 btn-lg mt-3 fw-bold"
                                [disabled]="citaForm.invalid || estaEnviando">
                                <span *ngIf="!estaEnviando">Confirmar mi Cita</span>
                                <span *ngIf="estaEnviando" class="spinner-border spinner-border-sm" role="status"
                                    aria-hidden="true"></span>
                                <span *ngIf="estaEnviando"> Enviando...</span>
                            </button>




                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>